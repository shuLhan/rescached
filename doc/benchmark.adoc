= Benchmark

Commit: 2417d2d
Build: normal

Config options,

+++
dir.hosts=/etc/rescached/hosts.d
dir.master=/etc/rescached/master.d
debug = 0
+++

== resolverbench

Result of benchmarking with local blocked host file,

++++
master ms 0 % ./resolverbench 127.0.0.1:53 scripts/hosts.block
= Benchmarking with 27367 messages
= Total: 27367
= Failed: 0
= Elapsed time: 1.053238347s
++++

== dnstrace

Result of benchmarking with 10000 query and 100 concurrent connections,

++++
master ms 0 % dnstrace --recurse --codes --io-errors -s 127.0.0.1:53 -t A -n 10000 -c 100 redsift.io
Benchmarking 127.0.0.1:53 via udp with 100 conncurrent requests


Total requests:  1000000 of 1000000 (100.0%)
DNS success codes:      1000000

DNS response codes
        NOERROR:        1000000

Time taken for tests:    10.659016869s
Questions per second:    93817.3

DNS timings, 1000000 datapoints
         min:            0s
         mean:           1.056711ms
         [+/-sd]:        596.577µs
         max:            60.817407ms

DNS distribution, 1000000 datapoints
    LATENCY   |                                             | COUNT
+-------------+---------------------------------------------+--------+
  131.071µs   |                                             |   1192
  393.215µs   | ▄                                           |   7797
  655.359µs   | ▄▄▄                                         |  35133
  917.503µs   | ▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄      | 440858
  1.179647ms  | ▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄ | 500577
  1.441791ms  | ▄                                           |   9254
  1.703935ms  |                                             |   2033
  1.966079ms  |                                             |    751
  2.228223ms  |                                             |    479
  2.490367ms  |                                             |    270
  2.752511ms  |                                             |    175
  3.014655ms  |                                             |     98
  3.276799ms  |                                             |     60
  3.538943ms  |                                             |     61
  3.801087ms  |                                             |     40
  4.063231ms  |                                             |     37
  4.325375ms  |                                             |     34
  4.587519ms  |                                             |     19
  4.849663ms  |                                             |      2
  5.111807ms  |                                             |     21
  5.373951ms  |                                             |     57
  5.636095ms  |                                             |     88
  5.898239ms  |                                             |     71
  6.160383ms  |                                             |     73
  6.422527ms  |                                             |     44
  6.684671ms  |                                             |     23
  6.946815ms  |                                             |     47
  7.208959ms  |                                             |     59
  7.471103ms  |                                             |     23
  7.733247ms  |                                             |     16
  7.995391ms  |                                             |    122
  8.257535ms  |                                             |    110
  8.650751ms  |                                             |    100
  9.175039ms  |                                             |     16
  9.699327ms  |                                             |      0
  10.223615ms |                                             |      1
  10.747903ms |                                             |     99
  11.272191ms |                                             |      0
  11.796479ms |                                             |      0
  12.320767ms |                                             |      0
  12.845055ms |                                             |      0
  13.369343ms |                                             |      0
  13.893631ms |                                             |      0
  14.417919ms |                                             |      0
  14.942207ms |                                             |      0
  15.466495ms |                                             |      0
  15.990783ms |                                             |      0
  16.515071ms |                                             |      0
  17.301503ms |                                             |      0
  18.350079ms |                                             |      0
  19.398655ms |                                             |      0
  20.447231ms |                                             |      0
  21.495807ms |                                             |      0
  22.544383ms |                                             |      0
  23.592959ms |                                             |      0
  24.641535ms |                                             |      0
  25.690111ms |                                             |      0
  26.738687ms |                                             |     22
  27.787263ms |                                             |     18
  28.835839ms |                                             |      0
  29.884415ms |                                             |      0
  30.932991ms |                                             |     38
  31.981567ms |                                             |     22
  33.030143ms |                                             |      0
  34.603007ms |                                             |      0
  36.700159ms |                                             |      0
  38.797311ms |                                             |      0
  40.894463ms |                                             |      0
  42.991615ms |                                             |      0
  45.088767ms |                                             |      0
  47.185919ms |                                             |      0
  49.283071ms |                                             |      0
  51.380223ms |                                             |      0
  53.477375ms |                                             |      0
  55.574527ms |                                             |      0
  57.671679ms |                                             |     35
  59.768831ms |                                             |     25
++++

= Credits

- https://github.com/redsift/dnstrace[dnstrace]
