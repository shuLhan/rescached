= Benchmark

Commit: 2417d2d
Build: normal

Config options,

----
dir.hosts=/etc/rescached/hosts.d
dir.master=/etc/rescached/master.d
debug = 0
----

== resolverbench

Result of benchmarking with local blocked host file,

----
master ms 0 % ./resolverbench 127.0.0.1:53 scripts/hosts.block
= Benchmarking with 27367 messages
= Total: 27367
= Failed: 0
= Elapsed time: 1.053238347s
----

== dnstrace

Result of benchmarking with 10000 query and 100 concurrent connections,

----
master ms 0 % dnstrace --recurse --codes --io-errors -s 127.0.0.1:53 -t A -n 10000 -c 100 redsift.io
Benchmarking 127.0.0.1:53 via udp with 100 conncurrent requests


Total requests:  1000000 of 1000000 (100.0%)
DNS success codes:      1000000

DNS response codes
        NOERROR:        1000000

Time taken for tests:    9.851753969s
Questions per second:    101504.8

DNS timings, 1000000 datapoints
         min:            0s
         mean:           970.052µs
         [+/-sd]:        649.245µs
         max:            54.525951ms

DNS distribution, 1000000 datapoints
    LATENCY   |                                             | COUNT
+-------------+---------------------------------------------+--------+
  131.071µs   | ▄                                           |   7531
  393.215µs   | ▄▄                                          |  30236
  655.359µs   | ▄▄▄▄▄▄▄▄▄▄▄                                 | 155159
  917.503µs   | ▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄ | 604083
  1.179647ms  | ▄▄▄▄▄▄▄▄▄                                   | 132357
  1.441791ms  | ▄▄                                          |  30967
  1.703935ms  | ▄                                           |  15785
  1.966079ms  | ▄                                           |   8119
  2.228223ms  |                                             |   4497
  2.490367ms  |                                             |   2067
  2.752511ms  |                                             |   1472
  3.014655ms  |                                             |   1109
  3.276799ms  |                                             |    940
  3.538943ms  |                                             |    914
  3.801087ms  |                                             |    767
  4.063231ms  |                                             |    782
  4.325375ms  |                                             |    691
  4.587519ms  |                                             |    491
  4.849663ms  |                                             |    348
  5.111807ms  |                                             |    347
  5.373951ms  |                                             |    279
  5.636095ms  |                                             |    293
  5.898239ms  |                                             |    148
  6.160383ms  |                                             |    119
  6.422527ms  |                                             |     64
  6.684671ms  |                                             |     35
  6.946815ms  |                                             |     27
  7.208959ms  |                                             |      8
  7.471103ms  |                                             |      1
  7.733247ms  |                                             |      3
  7.995391ms  |                                             |      4
  8.257535ms  |                                             |     40
  8.650751ms  |                                             |     77
  9.175039ms  |                                             |     41
  9.699327ms  |                                             |      0
  10.223615ms |                                             |      1
  10.747903ms |                                             |      1
  11.272191ms |                                             |      1
  11.796479ms |                                             |      1
  12.320767ms |                                             |      0
  12.845055ms |                                             |      0
  13.369343ms |                                             |      0
  13.893631ms |                                             |      0
  14.417919ms |                                             |      0
  14.942207ms |                                             |      0
  15.466495ms |                                             |      0
  15.990783ms |                                             |      0
  16.515071ms |                                             |      0
  17.301503ms |                                             |      0
  18.350079ms |                                             |      0
  19.398655ms |                                             |      0
  20.447231ms |                                             |      0
  21.495807ms |                                             |      0
  22.544383ms |                                             |      0
  23.592959ms |                                             |      7
  24.641535ms |                                             |     81
  25.690111ms |                                             |      7
  26.738687ms |                                             |      0
  27.787263ms |                                             |      0
  28.835839ms |                                             |      0
  29.884415ms |                                             |      0
  30.932991ms |                                             |     26
  31.981567ms |                                             |     14
  33.030143ms |                                             |      0
  34.603007ms |                                             |      0
  36.700159ms |                                             |      0
  38.797311ms |                                             |      0
  40.894463ms |                                             |      0
  42.991615ms |                                             |      0
  45.088767ms |                                             |      0
  47.185919ms |                                             |      0
  49.283071ms |                                             |      0
  51.380223ms |                                             |      0
  53.477375ms |                                             |     60
----


== Credits

- https://github.com/redsift/dnstrace[dnstrace]
