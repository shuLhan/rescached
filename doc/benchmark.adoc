= Benchmark

Commit: 7d047a7
Build: normal

Config options,

----
dir.hosts=/etc/rescached/hosts.d
dir.master=/etc/rescached/master.d
debug = 0
----

== resolverbench

Result of benchmarking with local blocked host file,

----
master ms 0 % ./resolverbench 127.0.0.1:53 scripts/hosts.block
= Benchmarking with 27367 messages
= Total: 27367
= Failed: 0
= Elapsed time: 1.053238347s
----

== dnstrace

Result of benchmarking with 10000 query and 100 concurrent connections,

----
master ms 0 % dnstrace --recurse --codes --io-errors -s 127.0.0.1:53 -t A -n 10000 -c 100 redsift.io
Benchmarking 127.0.0.1:53 via udp with 100 conncurrent requests

Total requests:  1000000 of 1000000 (100.0%)
DNS success codes:      1000000

DNS response codes
        NOERROR:        1000000

Time taken for tests:    8.665731705s
Questions per second:    115397.1

DNS timings, 1000000 datapoints
         min:            0s
         mean:           860.43µs
         [+/-sd]:        269.656µs
         max:            11.010047ms

DNS distribution, 1000000 datapoints
    LATENCY   |                                             | COUNT
+-------------+---------------------------------------------+--------+
  131.071µs   |                                             |   1024
  393.215µs   | ▄                                           |  11397
  655.359µs   | ▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄                       | 301336
  917.503µs   | ▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄ | 629373
  1.179647ms  | ▄▄▄                                         |  42246
  1.441791ms  |                                             |   7030
  1.703935ms  |                                             |   2579
  1.966079ms  |                                             |   1363
  2.228223ms  |                                             |    627
  2.490367ms  |                                             |    528
  2.752511ms  |                                             |    448
  3.014655ms  |                                             |    316
  3.276799ms  |                                             |    295
  3.538943ms  |                                             |    171
  3.801087ms  |                                             |     90
  4.063231ms  |                                             |    145
  4.325375ms  |                                             |    157
  4.587519ms  |                                             |    114
  4.849663ms  |                                             |    144
  5.111807ms  |                                             |     67
  5.373951ms  |                                             |     62
  5.636095ms  |                                             |     53
  5.898239ms  |                                             |     43
  6.160383ms  |                                             |     18
  6.422527ms  |                                             |     11
  6.684671ms  |                                             |     53
  6.946815ms  |                                             |     31
  7.208959ms  |                                             |      0
  7.471103ms  |                                             |     41
  7.733247ms  |                                             |     43
  7.995391ms  |                                             |     28
  8.257535ms  |                                             |      0
  8.650751ms  |                                             |      0
  9.175039ms  |                                             |      4
  9.699327ms  |                                             |     32
  10.223615ms |                                             |    123
  10.747903ms |                                             |      8
----


== Credits

- https://github.com/redsift/dnstrace[dnstrace]
